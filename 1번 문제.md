## 동시에 같은 DB Table row 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요
데이터베이스 동시 업데이트 상황을 방어하는 방법은 크게 두 가지로 생각해볼 수 있을 것 같습니다.
첫 번째는 데이터베이스 커밋을 요구하는 API 요청을 받을 때 트랜잭션이 시작되는 시점부터 끝나는 시점까지의 코드를 함수화하고 이를 Message Queue에 쌓아 입력받은 순서대로 처리되게 하는 방법입니다. 이렇게 구성할 시 각 트랜잭션은 독립적으로 수행되고 또 차례대로 실행되기 때문에 동시성 제어가 될 수 있을 거라 예상합니다. 하지만 이 경우 데이터베이스를 접근하기 위해 MQ를 거쳐 가야 하므로 불필요한 추가 비용이 발생하게 됩니다.
두 번째 방법은 데이터베이스에서 제공되는 트랜잭션 격리 기능을 사용하는 것입니다. PostgreSQL의 경우 Serializable 수준을 사용하면 하나의 트랜잭션이 수행 중일 때 또 다른 트랜잭션은 수행되지 않고, 대기상태로 남아있게 됩니다. 그리고 이전 트랜잭션 종료 후 다음 트랜잭션이 수행되기 때문에 동시에 데이터베이스를 수정할 수 없게 됩니다. 결국 첫 번째 방법과 동일한 동작을 하지만 데이터베이스의 기능으로 동작하기에 추가 비용이 발생하지 않게 됩니다.
